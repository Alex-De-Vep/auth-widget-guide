<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<link href="./_app/immutable/assets/0.CSLZZ2W0.css" rel="stylesheet">
		<link rel="modulepreload" href="./_app/immutable/entry/start.CX4fcRQr.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/B1NmUfNE.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/BJQ5F0-H.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/pGj6-6hA.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/JSZiFJmg.js">
		<link rel="modulepreload" href="./_app/immutable/entry/app.CrCJhkTB.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/DsnmJJEf.js">
		<link rel="modulepreload" href="./_app/immutable/nodes/0.sM8fbMdc.js">
		<link rel="modulepreload" href="./_app/immutable/nodes/2.simpXSU1.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/Bav22pLX.js"><!--[--><link rel="icon" href="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='107'%20height='128'%20viewBox='0%200%20107%20128'%3e%3ctitle%3esvelte-logo%3c/title%3e%3cpath%20d='M94.157%2022.819c-10.4-14.885-30.94-19.297-45.792-9.835L22.282%2029.608A29.92%2029.92%200%200%200%208.764%2049.65a31.5%2031.5%200%200%200%203.108%2020.231%2030%2030%200%200%200-4.477%2011.183%2031.9%2031.9%200%200%200%205.448%2024.116c10.402%2014.887%2030.942%2019.297%2045.791%209.835l26.083-16.624A29.92%2029.92%200%200%200%2098.235%2078.35a31.53%2031.53%200%200%200-3.105-20.232%2030%2030%200%200%200%204.474-11.182%2031.88%2031.88%200%200%200-5.447-24.116'%20style='fill:%23ff3e00'/%3e%3cpath%20d='M45.817%20106.582a20.72%2020.72%200%200%201-22.237-8.243%2019.17%2019.17%200%200%201-3.277-14.503%2018%2018%200%200%201%20.624-2.435l.49-1.498%201.337.981a33.6%2033.6%200%200%200%2010.203%205.098l.97.294-.09.968a5.85%205.85%200%200%200%201.052%203.878%206.24%206.24%200%200%200%206.695%202.485%205.8%205.8%200%200%200%201.603-.704L69.27%2076.28a5.43%205.43%200%200%200%202.45-3.631%205.8%205.8%200%200%200-.987-4.371%206.24%206.24%200%200%200-6.698-2.487%205.7%205.7%200%200%200-1.6.704l-9.953%206.345a19%2019%200%200%201-5.296%202.326%2020.72%2020.72%200%200%201-22.237-8.243%2019.17%2019.17%200%200%201-3.277-14.502%2017.99%2017.99%200%200%201%208.13-12.052l26.081-16.623a19%2019%200%200%201%205.3-2.329%2020.72%2020.72%200%200%201%2022.237%208.243%2019.17%2019.17%200%200%201%203.277%2014.503%2018%2018%200%200%201-.624%202.435l-.49%201.498-1.337-.98a33.6%2033.6%200%200%200-10.203-5.1l-.97-.294.09-.968a5.86%205.86%200%200%200-1.052-3.878%206.24%206.24%200%200%200-6.696-2.485%205.8%205.8%200%200%200-1.602.704L37.73%2051.72a5.42%205.42%200%200%200-2.449%203.63%205.79%205.79%200%200%200%20.986%204.372%206.24%206.24%200%200%200%206.698%202.486%205.8%205.8%200%200%200%201.602-.704l9.952-6.342a19%2019%200%200%201%205.295-2.328%2020.72%2020.72%200%200%201%2022.237%208.242%2019.17%2019.17%200%200%201%203.277%2014.503%2018%2018%200%200%201-8.13%2012.053l-26.081%2016.622a19%2019%200%200%201-5.3%202.328'%20style='fill:%23fff'/%3e%3c/svg%3e"/><!--]-->
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents"><!--[--><!--[--><!----><div class="container mx-auto px-4 py-8 prose dark:prose-invert"><!----><h1 id="руководство-по-установке-и-настройке-trustedwidget"><a href="#руководство-по-установке-и-настройке-trustedwidget">Руководство по установке и настройке TrustedWidget</a></h1> <h2 id="установка-на-клиенте-ui"><a href="#установка-на-клиенте-ui">Установка на клиенте (UI)</a></h2> <pre class="language-bash"><!----><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> trusted-widget
<span class="token comment"># или</span>
<span class="token function">yarn</span> <span class="token function">add</span> trusted-widget</code><!----></pre> <h2 id="конфигурация-trustedwidget"><a href="#конфигурация-trustedwidget">Конфигурация TrustedWidget</a></h2> <h3 id="параметры-конфигурации"><a href="#параметры-конфигурации">Параметры конфигурации</a></h3> <h4 id="обязательные-параметры"><a href="#обязательные-параметры">Обязательные параметры</a></h4> <table><thead><tr><th>Параметр</th><th>Тип</th><th>Описание</th><th>Пример</th></tr></thead><tbody><tr><td><code>appId</code></td><td><code>string</code></td><td>Уникальный идентификатор приложения в Trusted</td><td><code>"MTnOOTdx85FgNbOFy2nUsH"</code></td></tr><tr><td><code>redirectUrl</code></td><td><code>string</code></td><td>URL для перенаправления после авторизации</td><td><code>"http://localhost:3000/login"</code></td></tr></tbody></table> <h4 id="необязательные-параметры"><a href="#необязательные-параметры">Необязательные параметры</a></h4> <table><thead><tr><th>Параметр</th><th>Тип</th><th>Описание</th><th>Значение по умолчанию</th></tr></thead><tbody><tr><td><code>issuer</code></td><td><code>string</code></td><td>URL Trusted SSO сервера</td><td><code>"https://id.kloud.one"</code></td></tr><tr><td><code>withOutHomePage</code></td><td><code>boolean</code></td><td>Автоматический редирект на авторизацию</td><td><code>false</code></td></tr><tr><td><code>getTokenEndPoint</code></td><td><code>string</code></td><td>Endpoint для получения токена</td><td><code>"/auth/token"</code></td></tr><tr><td><code>getUserInfoEndPoint</code></td><td><code>string</code></td><td>Endpoint для получения данных пользователя</td><td><code>"/auth/me"</code></td></tr><tr><td><code>scopes</code></td><td><code>string[]</code></td><td>OAuth2 разрешения</td><td><code>["openid", "lk", "profile"]</code></td></tr><tr><td><code>profile</code></td><td><code>IProfileConfig</code></td><td>Настройки профиля пользователя</td><td>См. раздел ниже</td></tr><tr><td><code>loginButton</code></td><td><code>ICustomMenuButton</code></td><td>Настройки кнопки входа</td><td>См. раздел ниже</td></tr><tr><td><code>menuButtons</code></td><td><code>ICustomMenuButton[]</code></td><td>Массив дополнительных кнопок</td><td>См. раздел ниже</td></tr><tr><td><code>customStyles</code></td><td><code>ICustomStyles</code></td><td>Глобальные стили виджета</td><td>См. раздел ниже</td></tr></tbody></table> <pre class="language-typescript"><!----><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> TrustedWidget<span class="token punctuation">,</span> TrustedWidgetConfig <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"trusted-widget"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> newConfig<span class="token operator">:</span> TrustedWidgetConfig <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  appId<span class="token operator">:</span> <span class="token string">"MTnOOTdx85FgNbOFy2nUsH"</span><span class="token punctuation">,</span>
  redirectUrl<span class="token operator">:</span> <span class="token string">"http://localhost:3000/login"</span><span class="token punctuation">,</span>
  issuer<span class="token operator">:</span> <span class="token string">"https://id.kloud.one"</span><span class="token punctuation">,</span>
  withOutHomePage<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  getTokenEndPoint<span class="token operator">:</span> <span class="token string">"/auth/token"</span><span class="token punctuation">,</span>
  getUserInfoEndPoint<span class="token operator">:</span> <span class="token string">"/auth/me"</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// Использование компонента</span>
<span class="token operator">&lt;</span>TrustedWidget config<span class="token operator">=</span><span class="token punctuation">&#123;</span>newConfig<span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span></code><!----></pre> <h3 id="настройки-профиля-пользователя-profile"><a href="#настройки-профиля-пользователя-profile">Настройки профиля пользователя (profile)</a></h3> <h4 id="параметры-конфигурации-профиля"><a href="#параметры-конфигурации-профиля">Параметры конфигурации профиля</a></h4> <table><thead><tr><th>Параметр</th><th>Тип</th><th>Описание</th><th>Значение по умолчанию</th></tr></thead><tbody><tr><td><code>isHideText</code></td><td><code>boolean</code></td><td>Скрыть отображение имени пользователя</td><td><code>false</code></td></tr><tr><td><code>wrapper</code></td><td><code>IComponentStyles</code></td><td>Стили контейнера профиля (только цвета)</td><td>См. раздел стилей</td></tr><tr><td><code>button</code></td><td><code>IComponentStyles</code></td><td>Стили кнопки-аватара пользователя (только цвета)</td><td>См. раздел стилей</td></tr></tbody></table> <blockquote><p>⚠️ <strong>Важно:</strong> Для настроек профиля (<code>profile.wrapper</code> и <code>profile.button</code>) можно изменять только цвета (<code>color.text</code>, <code>color.background</code>, <code>color.hover</code>) и скрывать имя пользователя (<code>isHideText</code>). Другие параметры стилизации (такие как <code>borderRadius</code>, <code>padding</code>, <code>position</code>) не применяются к профилю.</p></blockquote> <h4 id="пример-настройки-профиля"><a href="#пример-настройки-профиля">Пример настройки профиля</a></h4> <pre class="language-typescript"><!----><code class="language-typescript"><span class="token keyword">const</span> config<span class="token operator">:</span> TrustedWidgetConfig <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  appId<span class="token operator">:</span> <span class="token string">"MTnOOTdx85FgNbOFy2nUsH"</span><span class="token punctuation">,</span>
  redirectUrl<span class="token operator">:</span> <span class="token string">"http://localhost:3000/login"</span><span class="token punctuation">,</span>
  <span class="token comment">// Только аватар без текста</span>
  profile<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    isHideText<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Скрыть имя пользователя</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code><!----></pre> <h3 id="настройки-кнопки-входа-loginbutton"><a href="#настройки-кнопки-входа-loginbutton">Настройки кнопки входа (loginButton)</a></h3> <h4 id="параметры-кнопки-входа"><a href="#параметры-кнопки-входа">Параметры кнопки входа</a></h4> <table><thead><tr><th>Параметр</th><th>Тип</th><th>Описание</th><th>Значение по умолчанию</th></tr></thead><tbody><tr><td><code>text</code></td><td><code>string</code></td><td>Текст кнопки входа</td><td><code>"Войти"</code></td></tr><tr><td><code>type</code></td><td><code>string</code></td><td>Тип кнопки</td><td><code>"login"</code></td></tr><tr><td><code>icon</code></td><td><code>string \| React.ReactElement</code></td><td>Ссылка на изображение или React элемент</td><td><code>null</code></td></tr><tr><td><code>customStyles</code></td><td><code>IComponentStyles</code></td><td>Индивидуальные стили для кнопки</td><td>См. раздел стилей</td></tr></tbody></table> <h4 id="пример-настройки-кнопки-входа"><a href="#пример-настройки-кнопки-входа">Пример настройки кнопки входа</a></h4> <pre class="language-typescript"><!----><code class="language-typescript"><span class="token keyword">const</span> config<span class="token operator">:</span> TrustedWidgetConfig <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  appId<span class="token operator">:</span> <span class="token string">"MTnOOTdx85FgNbOFy2nUsH"</span><span class="token punctuation">,</span>
  redirectUrl<span class="token operator">:</span> <span class="token string">"http://localhost:3000/login"</span><span class="token punctuation">,</span>
  <span class="token comment">// Настройки кнопки для неавторизованных пользователей</span>
  loginButton<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    text<span class="token operator">:</span> <span class="token string">"Войти через Trusted"</span><span class="token punctuation">,</span>
    type<span class="token operator">:</span> <span class="token string">"login"</span><span class="token punctuation">,</span>
    icon<span class="token operator">:</span> <span class="token string">"https://id.kloud.one/favicon.ico"</span><span class="token punctuation">,</span> <span class="token comment">// Пользовательская иконка</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code><!----></pre> <h4 id="пример-кнопки-входа-без-иконки"><a href="#пример-кнопки-входа-без-иконки">Пример кнопки входа без иконки</a></h4> <pre class="language-typescript"><!----><code class="language-typescript"><span class="token keyword">const</span> config<span class="token operator">:</span> TrustedWidgetConfig <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  appId<span class="token operator">:</span> <span class="token string">"MTnOOTdx85FgNbOFy2nUsH"</span><span class="token punctuation">,</span>
  redirectUrl<span class="token operator">:</span> <span class="token string">"http://localhost:3000/login"</span><span class="token punctuation">,</span>
  <span class="token comment">// Простая кнопка только с текстом</span>
  loginButton<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    text<span class="token operator">:</span> <span class="token string">"Войти"</span><span class="token punctuation">,</span>
    type<span class="token operator">:</span> <span class="token string">"login"</span><span class="token punctuation">,</span>
    customStyles<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      isHideIcon<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Скрыть иконку</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code><!----></pre> <h3 id="параметры-кнопок-меню-menubuttons"><a href="#параметры-кнопок-меню-menubuttons">Параметры кнопок меню (menuButtons)</a></h3> <h4 id="обязательные-параметры-для-menubuttons"><a href="#обязательные-параметры-для-menubuttons">Обязательные параметры для menuButtons</a></h4> <table><thead><tr><th>Параметр</th><th>Тип</th><th>Описание</th><th>Пример</th></tr></thead><tbody><tr><td><code>text</code></td><td><code>string</code></td><td>Отображаемое название кнопки</td><td><code>"TestService"</code></td></tr><tr><td><code>link</code></td><td><code>string</code></td><td>Ссылка на страницу для перехода</td><td><code>"https://test.com"</code></td></tr></tbody></table> <h4 id="необязательные-параметры-для-menubuttons"><a href="#необязательные-параметры-для-menubuttons">Необязательные параметры для menuButtons</a></h4> <table><thead><tr><th>Параметр</th><th>Тип</th><th>Описание</th><th>Значение по умолчанию</th></tr></thead><tbody><tr><td><code>icon</code></td><td><code>string \| React.ReactElement</code></td><td>Ссылка на изображение или React элемент</td><td><code>null</code></td></tr><tr><td><code>customStyles</code></td><td><code>IComponentStyles</code></td><td>Индивидуальные стили для кнопки</td><td>См. раздел стилей</td></tr></tbody></table> <h3 id="пример-конфигурации"><a href="#пример-конфигурации">Пример конфигурации</a></h3> <pre class="language-typescript"><!----><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> TrustedWidget<span class="token punctuation">,</span> TrustedWidgetConfig <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"trusted-widget"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> newConfig<span class="token operator">:</span> TrustedWidgetConfig <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  appId<span class="token operator">:</span> <span class="token string">"MTnOOTdx85FgNbOFy2nUsH"</span><span class="token punctuation">,</span>
  redirectUrl<span class="token operator">:</span> <span class="token string">"http://localhost:3000/login"</span><span class="token punctuation">,</span>
  menuButtons<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
      text<span class="token operator">:</span> <span class="token string">"TestService"</span><span class="token punctuation">,</span>
      link<span class="token operator">:</span> <span class="token string">"https://test.com"</span><span class="token punctuation">,</span>
      icon<span class="token operator">:</span> <span class="token string">"https://image.png"</span><span class="token punctuation">,</span> <span class="token comment">// | &lt;Icon /></span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code><!----></pre> <h2 id="система-стилизации-виджета"><a href="#система-стилизации-виджета">Система стилизации виджета</a></h2> <p>В объекте <code>TrustedWidgetConfig</code> можно задать внешний вид всех элементов виджета через свойство <code>customStyles</code>. Это позволяет гибко управлять цветами, скруглением и выравниванием контента без необходимости менять код компонентов.</p> <h4 id="настройка-внешнего-вида"><a href="#настройка-внешнего-вида">Настройка внешнего вида</a></h4> <table><thead><tr><th>Параметр</th><th>Тип</th><th>Описание</th></tr></thead><tbody><tr><td><code>customStyles</code></td><td><code>ICustomStyles</code></td><td>Объект стилизации всего виджета</td></tr></tbody></table> <h3 id="параметры-кастомных-стилей-customstyles"><a href="#параметры-кастомных-стилей-customstyles">Параметры кастомных стилей (customStyles)</a></h3> <h4 id="глобальные-стили"><a href="#глобальные-стили">Глобальные стили</a></h4> <table><thead><tr><th>Параметр</th><th>Тип</th><th>Описание</th><th>Пример</th></tr></thead><tbody><tr><td><code>global.borderRadius</code></td><td><code>string</code></td><td>Скругление углов для всех элементов</td><td><code>"12px"</code></td></tr><tr><td><code>global.color</code></td><td><code>IComponentStyles</code></td><td>Глобальные цвета</td><td>См. ниже</td></tr></tbody></table> <h4 id="стили-компонентов"><a href="#стили-компонентов">Стили компонентов</a></h4> <table><thead><tr><th>Параметр</th><th>Тип</th><th>Описание</th><th>Назначение</th></tr></thead><tbody><tr><td><code>components.primaryButton</code></td><td><code>IComponentStyles</code></td><td>Стиль основной кнопки</td><td>Кнопка “Войти”, “Профиль”</td></tr><tr><td><code>components.secondaryButton</code></td><td><code>IComponentStyles</code></td><td>Стиль второстепенной кнопки</td><td>Кнопка “Выход”</td></tr><tr><td><code>components.accountButton</code></td><td><code>IComponentStyles</code></td><td>Стиль кнопок меню аккаунта</td><td>Кнопки в выпадающем меню</td></tr></tbody></table> <h4 id="параметры-icomponentstyles"><a href="#параметры-icomponentstyles">Параметры IComponentStyles</a></h4> <table><thead><tr><th>Параметр</th><th>Тип</th><th>Описание</th><th>Пример</th></tr></thead><tbody><tr><td><code>color.text</code></td><td><code>string</code></td><td>Цвет текста и иконки (HEX)</td><td><code>"#ffffff"</code></td></tr><tr><td><code>color.background</code></td><td><code>string</code></td><td>Цвет фона (HEX)</td><td><code>"#1976d2"</code></td></tr><tr><td><code>color.hover</code></td><td><code>string</code></td><td>Цвет фона при наведении (HEX)</td><td><code>"#1565c0"</code></td></tr><tr><td><code>borderRadius</code></td><td><code>string</code></td><td>Скругление углов элемента</td><td><code>"8px"</code></td></tr><tr><td><code>padding</code></td><td><code>string</code></td><td>Внутренние отступы</td><td><code>"8px 16px"</code></td></tr><tr><td><code>position</code></td><td><code>"left" \| "center"</code></td><td>Выравнивание контента в кнопке</td><td><code>"center"</code></td></tr><tr><td><code>isHideIcon</code></td><td><code>boolean</code></td><td>Скрыть иконку в кнопке</td><td><code>false</code></td></tr></tbody></table> <h3 id="наследование-стилей-secondarybutton"><a href="#наследование-стилей-secondarybutton">Наследование стилей secondaryButton</a></h3> <p>Виджет имеет умную систему наследования стилей для кнопки <code>secondaryButton</code>:</p> <ul><li><strong>Если заданы стили только для <code>primaryButton</code></strong>, то они автоматически применяются и к <code>secondaryButton</code>, но с большей прозрачностью (через уменьшение opacity).</li> <li><strong>Если заданы отдельные стили для <code>secondaryButton</code></strong>, то прозрачность применяться не будет — используются только явно указанные параметры.</li></ul> <h3 id="пример-конфигурации-стилей"><a href="#пример-конфигурации-стилей">Пример конфигурации стилей</a></h3> <h4 id="пример-настройки-глобальных-стилей"><a href="#пример-настройки-глобальных-стилей">Пример настройки глобальных стилей</a></h4> <pre class="language-typescript"><!----><code class="language-typescript"><span class="token keyword">const</span> config<span class="token operator">:</span> TrustedWidgetConfig <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  appId<span class="token operator">:</span> <span class="token string">"MTnOOTdx85FgNbOFy2nUsH"</span><span class="token punctuation">,</span>
  redirectUrl<span class="token operator">:</span> <span class="token string">"http://localhost:3000/login"</span><span class="token punctuation">,</span>
  <span class="token comment">// Дефолтные значения для глобальных стилей</span>
  customStyles<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    global<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      color<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        text<span class="token operator">:</span> <span class="token string">"#666666"</span><span class="token punctuation">,</span>
        background<span class="token operator">:</span> <span class="token string">"#ffffff"</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      borderRadius<span class="token operator">:</span> <span class="token string">"8px"</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    components<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      accountButton<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        color<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          text<span class="token operator">:</span> <span class="token string">"#fff"</span><span class="token punctuation">,</span>
          background<span class="token operator">:</span> <span class="token string">"#efefef"</span><span class="token punctuation">,</span>
          hover<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token comment">// если не задан применяется filter: brightness(90%)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        position<span class="token operator">:</span> <span class="token string">"left"</span><span class="token punctuation">,</span>
        isHideIcon<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      primaryButton<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        color<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          text<span class="token operator">:</span> <span class="token string">"#ffffff"</span><span class="token punctuation">,</span>
          background<span class="token operator">:</span> <span class="token string">"#b5262f"</span><span class="token punctuation">,</span>
          hover<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token comment">// если не задан применяется filter: brightness(90%)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        position<span class="token operator">:</span> <span class="token string">"left"</span><span class="token punctuation">,</span>
        isHideIcon<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token comment">// secondaryButton не задан — будет использоваться стиль primaryButton с прозрачностью (opacity:0.5)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code><!----></pre> <h4 id="полная-конфигурация-с-профилем"><a href="#полная-конфигурация-с-профилем">Полная конфигурация с профилем</a></h4> <pre class="language-typescript"><!----><code class="language-typescript"><span class="token keyword">const</span> config<span class="token operator">:</span> TrustedWidgetConfig <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  appId<span class="token operator">:</span> <span class="token string">"MTnOOTdx85FgNbOFy2nUsH"</span><span class="token punctuation">,</span>
  redirectUrl<span class="token operator">:</span> <span class="token string">"http://localhost:3000/login"</span><span class="token punctuation">,</span>
  <span class="token comment">// Настройки профиля</span>
  profile<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    isHideText<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    wrapper<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      color<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        text<span class="token operator">:</span> <span class="token string">"#333333"</span><span class="token punctuation">,</span>
        background<span class="token operator">:</span> <span class="token string">"#f8f9fa"</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    button<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      color<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        text<span class="token operator">:</span> <span class="token string">"#333333"</span><span class="token punctuation">,</span>
        background<span class="token operator">:</span> <span class="token string">"transparent"</span><span class="token punctuation">,</span>
        hover<span class="token operator">:</span> <span class="token string">"rgba(0, 0, 0, 0.08)"</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code><!----></pre> <h4 id="полная-конфигурация-с-кнопкой-входа"><a href="#полная-конфигурация-с-кнопкой-входа">Полная конфигурация с кнопкой входа</a></h4> <pre class="language-typescript"><!----><code class="language-typescript"><span class="token keyword">const</span> config<span class="token operator">:</span> TrustedWidgetConfig <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  appId<span class="token operator">:</span> <span class="token string">"MTnOOTdx85FgNbOFy2nUsH"</span><span class="token punctuation">,</span>
  redirectUrl<span class="token operator">:</span> <span class="token string">"http://localhost:3000/login"</span><span class="token punctuation">,</span>
  <span class="token comment">// Кнопка входа с иконкой</span>
  loginButton<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    text<span class="token operator">:</span> <span class="token string">"Войти"</span><span class="token punctuation">,</span>
    type<span class="token operator">:</span> <span class="token string">"login"</span><span class="token punctuation">,</span>
    icon<span class="token operator">:</span> <span class="token string">"https://id.kloud.one/favicon.ico"</span><span class="token punctuation">,</span>
    customStyles<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      color<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        text<span class="token operator">:</span> <span class="token string">"#ffffff"</span><span class="token punctuation">,</span>
        background<span class="token operator">:</span> <span class="token string">"#4CAF50"</span><span class="token punctuation">,</span>
        hover<span class="token operator">:</span> <span class="token string">"#45a049"</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      borderRadius<span class="token operator">:</span> <span class="token string">"8px"</span><span class="token punctuation">,</span>
      padding<span class="token operator">:</span> <span class="token string">"10px 20px"</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code><!----></pre> <h3 id="пример-полной-конфигурации-стилей-с-явным-заданием-secondarybutton"><a href="#пример-полной-конфигурации-стилей-с-явным-заданием-secondarybutton">Пример полной конфигурации стилей с явным заданием secondaryButton</a></h3> <h4 id="полная-конфигурация-с-глобальными-стилями-и-меню"><a href="#полная-конфигурация-с-глобальными-стилями-и-меню">Полная конфигурация с глобальными стилями и меню</a></h4> <pre class="language-typescript"><!----><code class="language-typescript"><span class="token keyword">const</span> config<span class="token operator">:</span> TrustedWidgetConfig <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  appId<span class="token operator">:</span> <span class="token string">"MTnOOTdx85FgNbOFy2nUsH"</span><span class="token punctuation">,</span>
  redirectUrl<span class="token operator">:</span> <span class="token string">"http://localhost:3000/login"</span><span class="token punctuation">,</span>
  <span class="token comment">// Глобальные стили</span>
  customStyles<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    global<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      borderRadius<span class="token operator">:</span> <span class="token string">"8px"</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    components<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      primaryButton<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        color<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          text<span class="token operator">:</span> <span class="token string">"#ffffff"</span><span class="token punctuation">,</span>
          background<span class="token operator">:</span> <span class="token string">"#4CAF50"</span><span class="token punctuation">,</span>
          hover<span class="token operator">:</span> <span class="token string">"#45a049"</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        position<span class="token operator">:</span> <span class="token string">"center"</span><span class="token punctuation">,</span>
        isHideIcon<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      secondaryButton<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        color<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          text<span class="token operator">:</span> <span class="token string">"#4CAF50"</span><span class="token punctuation">,</span>
          background<span class="token operator">:</span> <span class="token string">"transparent"</span><span class="token punctuation">,</span>
          hover<span class="token operator">:</span> <span class="token string">"#f1f8e9"</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        position<span class="token operator">:</span> <span class="token string">"center"</span><span class="token punctuation">,</span>
        isHideIcon<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      accountButton<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        color<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          text<span class="token operator">:</span> <span class="token string">"#333333"</span><span class="token punctuation">,</span>
          background<span class="token operator">:</span> <span class="token string">"#ffffff"</span><span class="token punctuation">,</span>
          hover<span class="token operator">:</span> <span class="token string">"#f5f5f5"</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        position<span class="token operator">:</span> <span class="token string">"left"</span><span class="token punctuation">,</span>
        isHideIcon<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code><!----></pre> <h2 id="индивидуальная-стилизация-кнопок-меню"><a href="#индивидуальная-стилизация-кнопок-меню">Индивидуальная стилизация кнопок меню</a></h2> <p>Для каждой кнопки в <code>menuButtons</code> можно задать индивидуальные стили через свойство <code>customStyles</code> типа <code>IComponentStyles</code>.</p> <h4 id="пример-с-индивидуальными-стилями-для-кнопок"><a href="#пример-с-индивидуальными-стилями-для-кнопок">Пример с индивидуальными стилями для кнопок</a></h4> <pre class="language-typescript"><!----><code class="language-typescript"><span class="token keyword">const</span> config<span class="token operator">:</span> TrustedWidgetConfig <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  appId<span class="token operator">:</span> <span class="token string">"MTnOOTdx85FgNbOFy2nUsH"</span><span class="token punctuation">,</span>
  redirectUrl<span class="token operator">:</span> <span class="token string">"http://localhost:3000/login"</span><span class="token punctuation">,</span>
  menuButtons<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
      text<span class="token operator">:</span> <span class="token string">"Личный кабинет"</span><span class="token punctuation">,</span>
      link<span class="token operator">:</span> <span class="token string">"https://my-account.com"</span><span class="token punctuation">,</span>
      icon<span class="token operator">:</span> <span class="token string">"https://icons.com/profile.png"</span><span class="token punctuation">,</span>
      customStyles<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        color<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          text<span class="token operator">:</span> <span class="token string">"#ffffff"</span><span class="token punctuation">,</span>
          background<span class="token operator">:</span> <span class="token string">"#4CAF50"</span><span class="token punctuation">,</span> <span class="token comment">// Зеленый фон</span>
          hover<span class="token operator">:</span> <span class="token string">"#45a049"</span><span class="token punctuation">,</span> <span class="token comment">// Темно-зеленый при наведении</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        borderRadius<span class="token operator">:</span> <span class="token string">"8px"</span><span class="token punctuation">,</span>
        padding<span class="token operator">:</span> <span class="token string">"8px 16px"</span><span class="token punctuation">,</span>
        position<span class="token operator">:</span> <span class="token string">"center"</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
      text<span class="token operator">:</span> <span class="token string">"Настройки"</span><span class="token punctuation">,</span>
      link<span class="token operator">:</span> <span class="token string">"https://settings.com"</span><span class="token punctuation">,</span>
      icon<span class="token operator">:</span> <span class="token string">"https://icons.com/settings.png"</span><span class="token punctuation">,</span>
      customStyles<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        color<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          text<span class="token operator">:</span> <span class="token string">"#333333"</span><span class="token punctuation">,</span>
          background<span class="token operator">:</span> <span class="token string">"#f5f5f5"</span><span class="token punctuation">,</span> <span class="token comment">// Светло-серый фон</span>
          hover<span class="token operator">:</span> <span class="token string">"#e0e0e0"</span><span class="token punctuation">,</span> <span class="token comment">// Серый при наведении</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        borderRadius<span class="token operator">:</span> <span class="token string">"6px"</span><span class="token punctuation">,</span>
        padding<span class="token operator">:</span> <span class="token string">"6px 12px"</span><span class="token punctuation">,</span>
        position<span class="token operator">:</span> <span class="token string">"left"</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
      text<span class="token operator">:</span> <span class="token string">"Поддержка"</span><span class="token punctuation">,</span>
      link<span class="token operator">:</span> <span class="token string">"https://support.com"</span><span class="token punctuation">,</span>
      customStyles<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        color<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          text<span class="token operator">:</span> <span class="token string">"#ffffff"</span><span class="token punctuation">,</span>
          background<span class="token operator">:</span> <span class="token string">"#FF5722"</span><span class="token punctuation">,</span> <span class="token comment">// Оранжевый фон</span>
          hover<span class="token operator">:</span> <span class="token string">"#E64A19"</span><span class="token punctuation">,</span> <span class="token comment">// Темно-оранжевый при наведении</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        borderRadius<span class="token operator">:</span> <span class="token string">"4px"</span><span class="token punctuation">,</span>
        padding<span class="token operator">:</span> <span class="token string">"10px 20px"</span><span class="token punctuation">,</span>
        position<span class="token operator">:</span> <span class="token string">"center"</span><span class="token punctuation">,</span>
        isHideIcon<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Скрыть иконку для этой кнопки</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code><!----></pre> <h4 id="приоритет-применения-стилей"><a href="#приоритет-применения-стилей">Приоритет применения стилей</a></h4> <ol><li><strong>Индивидуальные стили кнопки</strong> (<code>customStyles</code> в объекте кнопки) — высший приоритет</li> <li><strong>Стили accountButton</strong> (<code>customStyles.components.accountButton</code>) — если не заданы индивидуальные</li> <li><strong>Дефолтные стили</strong> — если не заданы предыдущие</li></ol> <pre class="language-typescript"><!----><code class="language-typescript"><span class="token keyword">const</span> config<span class="token operator">:</span> TrustedWidgetConfig <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  appId<span class="token operator">:</span> <span class="token string">"MTnOOTdx85FgNbOFy2nUsH"</span><span class="token punctuation">,</span>
  redirectUrl<span class="token operator">:</span> <span class="token string">"http://localhost:3000/login"</span><span class="token punctuation">,</span>
  <span class="token comment">// Если у кнопки НЕТ customStyles, то для menuButtons применяются стили accountButton</span>
  customStyles<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    components<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">// дефолтные стили accountButton</span>
      accountButton<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        color<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          text<span class="token operator">:</span> <span class="token string">"#666666"</span><span class="token punctuation">,</span>
          background<span class="token operator">:</span> <span class="token string">"#efefef"</span><span class="token punctuation">,</span>
          hover<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token comment">// если не задан применяется filter: brightness(90%)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        position<span class="token operator">:</span> <span class="token string">"left"</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code><!----></pre> <h3 id="итоговое-поведение-системы-стилизации"><a href="#итоговое-поведение-системы-стилизации">Итоговое поведение системы стилизации</a></h3> <ol><li><strong>Централизованное управление</strong> — все стили задаются через <code>customStyles</code>, <code>profile</code> и <code>loginButton</code></li> <li><strong>Гибкая настройка профиля</strong> — через <code>profile.wrapper</code> и <code>profile.button</code> можно настроить внешний вид авторизованного пользователя</li> <li><strong>Настройка кнопки входа</strong> — через <code>loginButton.customStyles</code> можно настроить стили кнопки для неавторизованных пользователей</li> <li><strong>Глобальное скругление</strong> — <code>borderRadius</code> применяется ко всем элементам виджета (модальное окно, кнопки)</li> <li><strong>Управление отображением</strong> — флаги <code>isHideText</code> и <code>isHideIcon</code> позволяют скрывать текст и иконки</li> <li><strong>Умное наследование</strong> — если не заданы стили <code>secondaryButton</code>, используются стили <code>primaryButton</code> с прозрачностью. Если не задан цвет <code>hover</code> используется стиль <code>filter: brightness(90%)</code></li> <li><strong>Индивидуальная кастомизация</strong> — для каждой кнопки меню можно задать индивидуальные стили через <code>customStyles</code></li> <li><strong>Fallback система</strong> — если индивидуальные стили не заданы для <code>menuButtons</code>, применяются стили <code>accountButton</code></li> <li><strong>Гибкое выравнивание</strong> — контент в кнопках настраивается через свойство <code>position</code> (<code>"left"</code> | <code>"center"</code>)</li> <li><strong>Структура цветов</strong> — все цвета теперь организованы в объекте <code>color</code> с подсвойствами <code>text</code>, <code>background</code>, <code>hover</code></li></ol> <h2 id="настройки-в-сервисе-sso"><a href="#настройки-в-сервисе-sso">Настройки в сервисе SSO</a></h2> <p>Измените необходимые настройки в SSO для подключения входа через виджет:</p> <h3 id="параметры-аутентификации"><a href="#параметры-аутентификации">Параметры аутентификации</a></h3> <ol><li><p><strong>Метод аутентификации клиента для конечной точки получения токена</strong> (<code>token_endpoint_auth_method</code>) → <strong>none</strong></p></li> <li><p><strong>Метод аутентификации, используемый при доступе к конечной точке проверки токена</strong> (<code>introspection_endpoint_auth_method</code>) → <strong>none</strong></p></li> <li><p><strong>Метод аутентификации, используемый при доступе к конечной точке отзыва токенов</strong> (<code>revocation_endpoint_auth_method</code>) → <strong>none</strong></p></li></ol> <h3 id="возвратный-url"><a href="#возвратный-url">Возвратный URL</a></h3> <p><strong>Возвратный URL</strong> (<code>redirect_uris</code>) - укажите на вашу дефолтную страницу авторизации:</p> <pre class="language-undefined"><!----><code class="language-undefined">http://localhost:3000/login</code><!----></pre> <blockquote><p>⚠️ <strong>Важно:</strong> Параметр <code>redirectUrl</code> в коде конфигурации и <code>redirect_uris</code> в настройках SSO должны быть одинаковыми.</p></blockquote> <hr/><!----><!----></div><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_bo3shl = {
						base: new URL(".", location).pathname.slice(0, -1),
						assets: "/auth-widget-guide"
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("./_app/immutable/entry/start.CX4fcRQr.js"),
						import("./_app/immutable/entry/app.CrCJhkTB.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 2],
							data: [null,null],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
